"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[7885],{16871:(e,n,o)=>{o.d(n,{I:()=>d});var t=o(383112),r=o(177279);let i,a=Number(gbCommonInfo.CSRFTOEKN_MAX_RETRIES);Number.isNaN(a)&&(a=0);let s=500;"undefined"!=typeof window&&window.localStorage.getItem("csrfToken_delay")&&(s=Number(window.localStorage.getItem("csrfToken_delay")));let l=a;async function u(e){const n=async()=>{if(l>0)return await(n=s,new Promise((e=>setTimeout(e,n)))),l--,u(e);var n};try{const o=await Promise.race([e(),new Promise(((e,n)=>setTimeout((()=>n(new Error("Timeout"))),6e3)))]);return o||n()}catch(e){return n()}}function d(){return i||("undefined"!=typeof window&&(i=u((()=>t.A.updateXCsrfToken())).catch((e=>{var n;r.Vc.logInfo({tag:"SHEIN_PC_COMMON_CSRF_TOKEN",message:"update_csrf_token_error",params:{scene:null===(n=gbCommonInfo)||void 0===n?void 0:n.templateType,retries:l,msgData:e}})})).finally((()=>{i=void 0}))),i||Promise.resolve())}},97001:(e,n,o)=>{o.d(n,{A:()=>u});var t=o(98544),r=o.n(t),i=o(665640);const a=[],s=[];function l(e){try{a.forEach((n=>e.interceptors.request.use(...n))),s.forEach((n=>e.interceptors.response.use(...n)))}catch(e){i.error("assignInterceptors error",e)}return e}"undefined"!=typeof window&&(r()._create=r().create,r().create=function(e){return l(r()._create(e))},l(r()));const u=r()},383112:(e,n,o)=>{o.d(n,{A:()=>u,u:()=>d});var t=o(97001),r=o(939021),i=o(656716),a=o(360442),s=o(348668);const l=(()=>{if("undefined"==typeof window)return t.A;const e={baseURL:gbCommonInfo.langPath,headers:{common:{"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}};gbCommonInfo.csrf_token&&(e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token);const n=t.A.create(e);return n.updateXCsrfToken=async e=>{if(!e){const o=await n({url:"/api/common/csrf/update",ignoreInterceptor:["csrf"]}).catch((()=>({})));if(!o.updateCs)return!1;e=o.updateCs}return n.defaults.headers.common["x-csrf-token"]=e,gbCommonInfo.csrf_token=e,e},n.interceptors.request.use(i.WT),n.interceptors.request.use(i.zV),n.interceptors.request.use(i.G0),n.interceptors.request.use(i.S4),n.interceptors.request.use(i.Qo.hold),n.interceptors.request.use(i.IT.startRootSpan),n.interceptors.request.use(i.NI),n.interceptors.request.use(i.D7),n.interceptors.request.use(i.FZ),n.interceptors.request.use(s.iy),n.interceptors.response.use(i.eq),n.interceptors.response.use(i.X2.success,i.X2.error),n.interceptors.response.use(i.Gm),n.interceptors.response.use(i.Qo.replay(n)),n.interceptors.response.use((0,i.Qm)(n)),n.interceptors.response.use(i.t0),n.interceptors.response.use(i.Zw),n.interceptors.response.use(i.IT.success,i.IT.error),n.interceptors.response.use(i.ug),n.interceptors.response.use((e=>(r.A.httpIntercept(e.headers),e))),n.interceptors.response.use(i.XG),n.interceptors.response.use((e=>{var n,o;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse||null!==(o=e.config)&&void 0!==o&&o.__fromBSLibs__?e:e.data}),(e=>{var n,o;throw null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.getResponse||!e.request?e:e.request})),window.schttp=n,n})(),u=l;function d(){l({url:"/api/config/sampleControlConfig/get",method:"post"}).then((({code:e,info:n})=>{0===Number(e)&&(0,a.setLocalStorage)({key:"sky_eye_sample_control_config",value:n.skyEyeConfig||{},expire:36e5})}))}},656716:(e,n,o)=>{o.d(n,{o0:()=>E,zV:()=>b,FZ:()=>Y,X2:()=>O,S4:()=>A,Gm:()=>T,Qm:()=>P,Zw:()=>q,NI:()=>N,WT:()=>R,D7:()=>V,eq:()=>y,t0:()=>D,ug:()=>H,Qo:()=>M,G0:()=>B,IT:()=>J,XG:()=>X});var t=o(794103),r=o(246752),i=o(542520);const a={5501:"10011000",5502:"10011001",5503:"10011002",5510:"10011003",5511:"10011004",5512:"10011005",5520:"10011006"};var s=o(404266),l=o(98544),u=o.n(l),d=o(360442),c=o(114672),f=o(28366),m=o(383112),p=o(177279),g=o(476934),v=o(16871),_=o(939922),h=o(853447),w=o(674790),I=o(665640);function y(e){var n;const o=null==e||null===(n=e.config)||void 0===n?void 0:n.baseURL,{data:{code:t="",info:r={}}={}}=e||{};if("836100"==t&&null!=o&&o.includes("/bff-api")&&null!=r&&r.attachment){let n={code:t,sub_code:r.sub_code,attachment:r.attachment};e.data=n}return e}const C=["GET","HEAD","OPTIONS"];async function b(e){var n,o;if(null!=e&&null!==(n=e.headers)&&void 0!==n&&n.common["x-csrf-token"])return e;if("on"===(null===(o=gbCommonInfo)||void 0===o?void 0:o.SHOULD_RENDER_CSRF_TOKEN_ON_SSR))return e;if(((null==e?void 0:e.ignoreInterceptor)||[]).indexOf("csrf")>-1)return e;const t=e.method||"GET";if(((null==e?void 0:e.csrfIgnoreMethods)||C).indexOf(t.toUpperCase())>-1)return e;if("undefined"==typeof window)return e;if("/api/common/csrf/update"===(null==e?void 0:e.url))return e;const r=(0,v.I)();return r&&(await r,e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token||""),e}function S(e,n={}){var o;"undefined"!=typeof window&&(null===(o=window.TPM)||void 0===o||o.run({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:e,options:n}}))}function E(e){const n=function(e){var n;if("undefined"==typeof window||!window.AntiIn)return"";if(null===(n=gbCommonInfo)||void 0===n||!n.SYNC_ANTIIN_URLS.some((n=>e.includes(n))))return"";const o=window.AntiIn;return o._last?o._last:(o._calculating=o.syncGetAllEncrypted(o.Channel.PC,{collect_crosspage:gbCommonInfo.SYNC_ANTIIN_URLS_MORE.some((n=>e.includes(n))),version:gbCommonInfo.RISK_SDK_CONFIG.anti||""}),o._last=o._calculating,setTimeout((()=>o._last=void 0),200),o._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}function R(e){return"undefined"==typeof window||_.default.get({key:"currency"}),e}async function N(e){const n=await async function(e){var n;if("undefined"==typeof window||!window.AntiIn)return"";if(null===(n=gbCommonInfo)||void 0===n||!n.ANTIIN_URLS.some((n=>e.includes(n))))return"";const o=window.AntiIn;return o._last?o._last:(o._calculating||(o._calculating=o.getAllEncrypted(o.Channel.PC,{collect_crosspage:gbCommonInfo.ANTIIN_URLS_MORE.some((n=>e.includes(n))),version:gbCommonInfo.RISK_SDK_CONFIG.anti||""}).then((e=>(o._calculating=null,setTimeout((()=>o._last=void 0),200),o._last=e))).catch((()=>""))),await o._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}let k=!0;async function A(e){var n,o,t,r,i;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;e.customdata||(e.customdata={});let a=u().getUri(e);if(a.startsWith("http")){if(!a.startsWith(location.origin))return e;a=a.replace(location.origin,"")}let s="";const l=Date.now();if(e.customdata.requestStartTime=l,e.customdata.subUrl=null===(n=a.split("?"))||void 0===n?void 0:n[0],e.customdata.sigUrl=a,a=(null===(o=a.split("?"))||void 0===o?void 0:o[0])+"?"+(null===(t=a.split("?"))||void 0===t||null===(r=t[1])||void 0===r?void 0:r.replace(/'/g,"%27")),null===(i=gbCommonInfo)||void 0===i||!i.OPEN_SIGNATURE)return e;try{s=await window._SHEIN_CALC_SIGNATURE_(a);let e="signature_compute_time";k&&(k=!1,e="signature_compute_time_first"),S({data:[{key_path:e,values:{num:100*(Date.now()-l)}}]},{random:.05})}catch(e){var d,c,f;if("undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo)window.ErrorJs.sendError("error",`${null===(d=gbCommonInfo)||void 0===d||null===(c=d.REPORT_URL)||void 0===c?void 0:c.SA_REPORT_URL}/unusual`,{errorMark:"signature_compute_error",errorInfo:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,sigFileName:null===(f=gbCommonInfo)||void 0===f?void 0:f.SIG_FILE_NAME,sigUrl:a}})}return e.headers["x-gw-auth"]=s,e}function T(e){var n,o;const t=Number(null==e||null===(n=e.data)||void 0===n?void 0:n.code),r=Number(null==e||null===(o=e.data)||void 0===o?void 0:o.sub_code);return 836e3===t&&5501===r&&location.reload(),e}let U=!1;function q(e){var n;return[/\/api\/user\/wishlist(?!\/((check\/good)|(group\/optional\/goods\/get)|(redpoint\/get)))/].some((n=>n.test(e.config.url)))&&void 0!==(null===(n=e.data)||void 0===n?void 0:n.code)&&(-4!=+e.data.code&&-2!=+e.data.code||(U||(U=!0,(0,i.L)({message:gbCommonInfo.language.SHEIN_KEY_PC_17753,type:"none",offset:186,onClose:()=>U=!1})),e.data.code=-1,e.data.originCode=-4)),e}function P(e){return function(n){var o,t,r;const i=(null===(o=n.data)||void 0===o?void 0:o.code)||"";return null!==(t=n.config)&&void 0!==t&&null!==(r=t.schttp)&&void 0!==r&&r.asyncCheckLogin&&["00101110","300206"].includes(""+i)&&e({method:"POST",url:"/api/user/auth/logout"}),n}}function D(e){var n;if(null!==(n=e.config.schttp)&&void 0!==n&&n.needLogin&&e.data&&(300206==+e.data.code||"need login"===e.data.msg||"00101110"==e.data.code)){try{o.e(83368).then(o.bind(o,283368)).then((({removeAuthUserInfo:e})=>{e()})).catch((e=>{I.log("forceLogin:"+e)}))}catch(e){I.log(e+"")}location.href=gbCommonInfo.langPath+"/user/auth/logout"}return e}function L(e){const n=(null==e?void 0:e["gateway-waf-reject"])||"";return["A001","A002","A004","A005-Challenge","A005-Block"].some((e=>n.includes(e)))&&!["A002-1"].some((e=>n.includes(e)))}function x(){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return!0;const e=navigator.userAgent,{USER_AGENT_BLACK_LIST:n=[]}=gbCommonInfo;return function(e,n){return n.some((n=>e.includes(n)))}(e,n)}const O={success:function(e){var n,o,t,i,s,l,u,d,c,f;if(null!=e&&null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.apiLogSkip)return e;if((null==e||null===(t=e.config)||void 0===t||null===(i=t.customdata)||void 0===i?void 0:i.requestStartTime)>0){var m,v,_,h,w;const n=Date.now()-((null==e||null===(m=e.config)||void 0===m||null===(v=m.customdata)||void 0===v?void 0:v.requestStartTime)||0),o=(null==e||null===(_=e.config)||void 0===_?void 0:_.url)||"other";(0,g.F)(o,{responseTime:n}),S({resource:(null==e||null===(h=e.config)||void 0===h||null===(w=h.customdata)||void 0===w?void 0:w.subUrl)||"other",data:[{key_path:"request_time",values:{num:n}}]},{random:.05})}try{var y,C,b,E,R,N,k;if(L(null==e?void 0:e.headers)||x())return e;const{langPath:n=""}=gbCommonInfo,o=null!=e&&null!==(y=e.config)&&void 0!==y&&y.useBffApi?"bff_api_res_code_error":"api_res_code_error",t=(null==e||null===(C=e.config.customdata)||void 0===C?void 0:C.subUrl)||"other";var A,T;if(null!=(null===(b=e.data)||void 0===b?void 0:b.code)&&"0"!=e.data.code&&836100!=e.data.code)p.JY.metricCount({metric_name:o,tags:{siteuid:null===(A=gbCommonInfo)||void 0===A?void 0:A.SiteUID,errorCode:e.data.code,apiUrl:t.substring(n.length),hostname:location.hostname,referer:document.referer||""},message:(null===(T=e.data)||void 0===T?void 0:T.msg)||`${t}请求非0错误`},{immediate:!0});const r=null==e||null===(E=e.headers)||void 0===E||null===(R=E["site-uid"])||void 0===R?void 0:R.trim();if(!r||null===(N=gbCommonInfo)||void 0===N||!N.SiteUID)return e;var U,q,P;if(r!==(null===(k=gbCommonInfo)||void 0===k?void 0:k.SiteUID))p.JY.metricCount({metric_name:"bff_site_error",tags:{siteuid:null===(U=gbCommonInfo)||void 0===U?void 0:U.SiteUID,bffSiteuid:r||"other",apiUrl:(null===(q=e.config)||void 0===q||null===(P=q.customdata)||void 0===P?void 0:P.subUrl)||"other",hostname:location.hostname,referer:document.referer||""},message:"bff返回站点与当前请求站点不一致"},{immediate:!0})}catch(e){I.error(e)}try{if(r.A.sendReportForScHttp(e),!0==(836e3===Number(null==e||null===(s=e.data)||void 0===s?void 0:s.code)))S({resource:(null==e||null===(l=e.config)||void 0===l||null===(u=l.customdata)||void 0===u?void 0:u.subUrl)||"other",data:[{key_path:"request_error_signature",values:{status_code:String(a[Number(null==e||null===(d=e.data)||void 0===d?void 0:d.sub_code)]||0),info:{message:null==e||null===(c=e.config)||void 0===c||null===(f=c.customdata)||void 0===f?void 0:f.sigUrl}}}]},{immediate:!0})}catch(e){I.log(e)}try{var D,O;const n=null==e||null===(D=e.data)||void 0===D?void 0:D.code,o=null==e||null===(O=e.headers)||void 0===O?void 0:O["risk-id"];if(836100==n&&o){var G,F,M,J,H,V,Y,B,X;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(G=window)||void 0===G||G.sa("set","setPageData",n);const t=(null===(F=window)||void 0===F||null===(M=F.AntiIn)||void 0===M?void 0:M.syncGetAllEncrypted(null===(J=window)||void 0===J?void 0:J.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(H=e.request)||void 0===H?void 0:H.responseURL),i=(null===(V=window)||void 0===V?void 0:V.__ArmorToken)||(null===(Y=window)||void 0===Y?void 0:Y.sessionStorage.getItem("armorToken"))||(null===(B=window)||void 0===B?void 0:B.localStorage.getItem("armorToken"))||null;null===(X=window)||void 0===X||X.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e?void 0:e.data}})}}catch(e){I.log(e)}return e},error:function(e){if(void 0!==(null==e?void 0:e.request)){var n,o,t;r.A.sendReportForScHttp(e),S({resource:(null==e||null===(n=e.config)||void 0===n||null===(o=n.customdata)||void 0===o?void 0:o.subUrl)||"other",data:[{key_path:"request_error",values:{status_code:`10010${null==e||null===(t=e.request)||void 0===t?void 0:t.status}`}}]},{immediate:!0});try{var i,a,s,l,u;if(L(null==e||null===(i=e.response)||void 0===i?void 0:i.headers)||x())throw e;const n=(null==e||null===(a=e.response)||void 0===a?void 0:a.status)||0;if(+n<1)throw e;const{langPath:o=""}=gbCommonInfo,t=null!=e&&null!==(s=e.config)&&void 0!==s&&s.useBffApi?"bff_api_request_status_error":"api_request_status_error",r=(null==e||null===(l=e.config.customdata)||void 0===l?void 0:l.subUrl)||"other";p.JY.metricCount({metric_name:t,tags:{siteuid:null===(u=gbCommonInfo)||void 0===u?void 0:u.SiteUID,apiUrl:r.substring(o.length),errorCode:n,hostname:location.hostname,referer:document.referer},message:null==e?void 0:e.message},{immediate:!0})}catch(e){I.error(e)}}try{var d,c,f;const n=null==e||null===(d=e.response)||void 0===d?void 0:d.status,o=null==e||null===(c=e.response)||void 0===c||null===(f=c.headers)||void 0===f?void 0:f["risk-id"];if(403==n&&o){var m,g,v,_,h,w,y,C,b,E;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(m=window)||void 0===m||m.sa("set","setPageData",n);const t=(null===(g=window)||void 0===g||null===(v=g.AntiIn)||void 0===v?void 0:v.syncGetAllEncrypted(null===(_=window)||void 0===_?void 0:_.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(h=e.request)||void 0===h?void 0:h.responseURL),i=(null===(w=window)||void 0===w?void 0:w.__ArmorToken)||(null===(y=window)||void 0===y?void 0:y.sessionStorage.getItem("armorToken"))||(null===(C=window)||void 0===C?void 0:C.localStorage.getItem("armorToken"))||null;null===(b=window)||void 0===b||b.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e||null===(E=e.response)||void 0===E?void 0:E.data}})}}catch(e){I.log(e)}throw e}},G={name:"rewriteSignature",active:()=>gbCommonInfo.OPEN_SIGNATURE&&("gray"===gbCommonInfo.NODE_SERVER_ENV||"production"===gbCommonInfo.NODE_SERVER_ENV),range:()=>!0,check:({data:e})=>836e3==(null==e?void 0:e.code)&&5511==(null==e?void 0:e.sub_code),fix:()=>window._SHEIN_SYNC_TIMESTAMP_(gbCommonInfo.langPath+"/_openapi_gateway_/timestamp")},F={name:"geetest",active:()=>!0,range:({url:e})=>[/\/cart\/update/,/\/cart\/add_mall/,/\/api\/comment\/abcCommentImages\/query/,/\/api\/comment\/abcCommentInfo\/query/,/\/goods_detail_nsw\/getCommentByAbc/,/\/goods_detail_nsw\/getCommentInfoByAbc/].some((n=>n.test(e))),check:({data:e})=>{var n;return 836100==(null==e?void 0:e.code)&&(null==e?void 0:e.sub_code)&&(null==e||null===(n=e.attachment)||void 0===n?void 0:n.cookie_duration)},fix:e=>{var n;return(0,s.lt)(e.data.sub_code,e.data.attachment.cookie_duration,null==e||null===(n=e.headers)||void 0===n?void 0:n["risk-id"]).then((e=>{if("success"!==e.status)throw"geetest_close"!==e.status&&(0,i.L)({type:"error",message:gbCommonInfo.language.SHEIN_KEY_PC_16509}),e}))}};const M=new class{constructor(e){(0,t.A)(this,"replayQueue",{}),(0,t.A)(this,"plugins",[]),(0,t.A)(this,"_seed",9999),"undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo&&(e.forEach((({name:e,active:n,range:o,check:t,fix:r})=>{"string"==typeof e&&"function"==typeof n&&"function"==typeof o&&"function"==typeof t&&"function"==typeof r&&n()&&this.plugins.push({pluginName:e,range:o,check:t,fix:r,groupId:0})})),this.interceptor={hold:this._hold.bind(this),replay:e=>n=>this._replay(n,e)})}async _hold(e){return e.customdata||(e.customdata={}),e.customdata.groupId={},await Promise.all(this.plugins.map((async n=>{n.range(e)&&await n.holdingPromise,e.customdata.groupId[n.pluginName]=n.groupId}))),e}async _replay(e,n){var o,t;const r=null===(o=e.config)||void 0===o||null===(t=o.customdata)||void 0===t?void 0:t.groupId;if(!r)return e;const i=e.config.headers["x-gw-replay"];if(i)throw this.replayQueue[i](e),delete this.replayQueue[i],new Error("abandon from replay");let a=!0,s=!1;if(await Promise.all(this.plugins.map((async n=>{if(n.check(e)){a=!1;await this._doFix(e,r,n)||(s=!0)}}))),a||s)return e;const l=this._createUniqueId(),u=this._saveQueue(l);return n(this._resetConfig(l,e.config)).catch((e=>I.log("replay success: ","abandon from replay"===e.message))),u}async _doFix(e,n,o){return n[o.pluginName]!==o.groupId||o.holdingPromise?o.holdingPromise:o.holdingPromise=(async()=>{let n=!0;try{await o.fix(e)}catch(e){I.error(e),n=!1}return o.groupId++,delete o.holdingPromise,n})()}_createUniqueId(){return this._seed<1e3&&(this._seed=9999),this._seed--}_saveQueue(e){let n=null;const o=new Promise((e=>n=e));return this.replayQueue[e]=n,o}_resetConfig(e,n){return n.headers["x-gw-replay"]=e,delete n.headers["x-gw-auth"],delete n.headers["x-csrf-token"],n}}([G,F]).interceptor,J={_getRandomString(e,n="0123456789"){let o="";for(let t=e;t>0;--t)o+=n[Math.floor(Math.random()*n.length)];return o},_getRootSpanInfo(){const{_getRandomString:e}=J,n=`ff${e(14,"0123456789abcdef")}`.toString();return{traceID:n,spanID:n}},_sampleControlConfig:null,_getSampleRate(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return 0;if(["localhost","debug","gray"].includes(gbCommonInfo.NODE_SERVER_ENV))return 1;let n=null;if(J._sampleControlConfig){const{value:e,end:o}=J._sampleControlConfig;n=e,Date.now()>o&&(J._sampleControlConfig=null)}else{const e=(0,d.getLocalStorage)("sky_eye_sample_control_config");e&&(n=e,J._sampleControlConfig={value:e,end:Date.now()+18e5})}if(n){var o;const t=null===(o=n.apiMap)||void 0===o?void 0:o[e.url];return t?Number(t.prop):Number(n.prop)||.001}return"/api/config/sampleControlConfig/get"!==e.url&&(0,m.u)(),.001},_getSampleFlag(e){const{_getSampleRate:n}=J;return Math.random()<n(e)?1:0},startRootSpan(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{_getRootSpanInfo:n,_getSampleFlag:o}=J,{traceID:t}=n(),r=o(e);return e.headers["uber-trace-id"]=`${t}:${t}:0:${r}`,e},_buildTraceSpanData(e,n){var o,t,r,i,a;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo||!e||!n)return null;const{headers:s={},customdata:l={},method:u,url:d=""}=e,c=(null==s?void 0:s["uber-trace-id"])||"",[f="",,,m]=(null==c||null===(o=c.split)||void 0===o?void 0:o.call(c,":"))||[];if("1"!==m)return null;const p=null==l?void 0:l.requestStartTime,g=Date.now()-(p||0),{page_name:v}=window.getSaPageInfo||window.SaPageInfo||{},_=`${J._getSampleRate(e)}`,h="1"===_?"cons":"probabilistic",{headers:w}=n,I=(null==w?void 0:w["x-tracer-name"])||(null==d||null===(t=d.split)||void 0===t||null===(r=t.call(d,"?"))||void 0===r?void 0:r[0])||"/",{IS_RW:y,SERVER_TYPE:C="",NODE_SERVER_ENV:b=""}=gbCommonInfo,S=`${y?"romwe":"shein"}-PC-${C}-${b}`;return{traceID:f,spanID:f,parentID:"",startTime:p,duration:g,operationName:I,api:I,url:d||"",method:(null===(i=(a=u||"").toUpperCase)||void 0===i?void 0:i.call(a))||"",statusCode:n.status||504,ID:"fdf304b4-9e52-56e1-b9be-159baeafb0b9",host:S,page:v,authName:"",samplerType:h,samplerParam:_,spanKind:"client"}},success(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{headers:n,config:o}=e||{};if(!n||!o)return e;if(null!=n&&n["x-recognize-cache"])return e;const t=J._buildTraceSpanData(o,e);return t?(S({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(t)}}]},{random:1}),e):e},error(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;const{config:n,response:o}=e||{};if(!n)throw e;const{headers:t}=o||{};if(null!=t&&t["x-recognize-cache"])throw e;const r=J._buildTraceSpanData(n,o);if(!r)throw e;throw S({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(r)}}]},{random:1}),e}};function H(e){if("undefined"!=typeof window){const n=e.headers,o=n["Client-Ipver"]||n["client-ipver"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipver"):"")||"",t=n["Client-Ipaddr"]||n["client-ipaddr"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipaddr"):"")||"";o&&(window.__CLIENT_IPVER__=o),t&&(window.__CLIENT_IPADDR__=t)}return e}function V(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;if(e.headers["x-oest"]=w.Lw.getEnptValue(),e.useBffApi){const{langPath:n="",WEB_VERSION:o}=gbCommonInfo;if(e.baseURL=`${n}/bff-api`,e.headers.webVersion=o,["debug","localhost","gray"].includes(gbCommonInfo.NODE_SERVER_ENV)){const{bffEnv:n}=gbCommonInfo;e.headers["bff-env"]=n,e.headers.sheindebug="676"}}return(e.useBffApi||e.__fromBSLibs__)&&(e.headers["x-ad-flag"]=gbCommonInfo.xAdFlag),e}function Y(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const n=e.featureKey;if(!n)return e;if(!["post","POST"].includes(e.method))return e;const o=(0,h.Uo)(n);return o?(e.headers["hdata-c"]="ai","application/x-www-form-urlencoded"===e.headers["Content-Type"]?(e.data||(e.data={}),e.data&&"object"==typeof e.data?e.data.data_c={ai:o}:e.data&&"string"==typeof e.data&&(e.data=(0,f.J)(e.data),e.data.data_c=JSON.stringify({ai:o}),e.data=(0,c.r)({queryObj:e.data})),e):(e.data?e.data={...e.data||{},data_c:{ai:o}}:e.params={...e.params||{},data_c:{ai:o}},e)):e}function B(e){var n,o;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const t=e.url||"";if("on"!==(null===(n=gbCommonInfo)||void 0===n?void 0:n.FM_UPGRADE))return e;if(null===(o=gbCommonInfo)||void 0===o||!o.FM_SIGN_URLS.some((e=>t.includes(e))))return e;let r=u().getUri(e);try{var i,a;if(null!==(i=window)&&void 0!==i&&null!==(a=i._TDBotD)&&void 0!==a&&a.sign){var s,l,d;r=(null===(s=r.split("?"))||void 0===s?void 0:s[0])+"?"+(null===(l=r.split("?"))||void 0===l||null===(d=l[1])||void 0===d?void 0:d.replace(/'/g,"%27"));const n=window._TDBotD.sign({path:r});0==n.code&&(e.headers.tdSign=n.sign),null===p.JY||void 0===p.JY||p.JY.metricCount({metric_name:"td_compute_log",tags:{status:0==n.code?"sign_success":"sign_error",signCode:n.code,message:JSON.stringify(n),apolloUrl:t,sigUrl:r},message:"tongdunSignature"},{immediate:!0})}null===p.JY||void 0===p.JY||p.JY.metricCount({metric_name:"td_compute_log",tags:{status:"sign_all",signCode:99999,message:JSON.stringify({message:"sign_all",code:99999}),apolloUrl:t,sigUrl:r},message:"tongdunSignature"},{immediate:!0})}catch(e){null===p.JY||void 0===p.JY||p.JY.metricCount({metric_name:"td_runtime_error",tags:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,apolloUrl:t,sigUrl:r},message:"td_runtime_error"},{immediate:!0})}return e}function X(e){var n;return"undefined"==typeof window||"undefined"==typeof gbCommonInfo||null!==(n=e.headers)&&void 0!==n&&n["update-x-ad-flag"]&&(gbCommonInfo.xAdFlag=e.headers["update-x-ad-flag"]),e}},827539:(e,n,o)=>{o.d(n,{f:()=>i});var t=o(383112),r=o(999556);function i({isAsync:e,opt:n,successCb:o,errorCb:i,completeCb:a}){e?(0,t.A)({...n}).then((e=>{o&&o(e)})).catch((e=>{i&&i(e)})).finally((e=>{a&&a(e)})):(0,r.A)({...n,success:e=>{o&&o(e)},error:e=>{i&&i(e)},complete:e=>{a&&a(e)}})}},999556:(e,n,o)=>{o.d(n,{A:()=>b});var t=o(97001),r=o(547436),i=o.n(r),a=o(993397),s=o.n(a),l=o(512656),u=o.n(l),d=o(35666),c=o.n(d),f=o(933125),m=o.n(f),p=o(880083),g=o.n(p),v=o(989681),_=o.n(v);function h(e,n){return e.data=c().call(n,e.data,e.headers,n.transformResponse),e}function w(e,n,o,t,r,a=!1){const s=[...e];for(;s.length;){const{fulfilled:e,rejected:l}=s[n](),u=a?l:e;if(u){try{r=u===h?u(r,o):u(r),a=!1}catch(e){r=e,a=!0}if("[object Promise]"===Object.prototype.toString.call(r)){r=new(i())("Promise is unsupported in synchronizeInstance","INTERCEPTOR_ILLEGAL",o,t,r),a=!0;break}}}return{payload:r,inCatch:a}}function I(e,n,o,t,r){const{success:i,error:a,complete:s}=n;if("function"==typeof i||"function"==typeof a){const{payload:s,inCatch:l}=w(e.interceptors.response.handlers,"shift",n,o,t,r);l?"function"==typeof a&&a(s):"function"==typeof i&&i(s)}"function"==typeof s&&s(o)}function y(e){return e.defaults.adapter=function(e){return async function(n){try{(n=>{const{payload:o,inCatch:t}=w(e.interceptors.request.handlers,"pop",n,null,n);if(t)return void I(e,n,null,o,!0);const r=(n=o).headers,a=n.responseType;let l=n.data;s().isFormData(l)&&s().isStandardBrowserEnv()&&delete r["Content-Type"];let d=new XMLHttpRequest;const c=u()(n.baseURL,n.url);d.open(n.method.toUpperCase(),m()(c,n.params,n.paramsSerializer),!1),"setRequestHeader"in d&&s().forEach(r,(function(e,n){void 0===l&&"content-type"===n.toLowerCase()?delete r[n]:d.setRequestHeader(n,e)})),s().isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),a&&"json"!==a&&(d.responseType=n.responseType),l||(l=null);const f=_()(c);f&&-1===["http","https","file"].indexOf(f)?I(e,n,d,new(i())("Unsupported protocol "+f+":",i().ERR_BAD_REQUEST,n),!0):(d.send(l),function(){if(!d||4!==d.readyState)return;if(0===d.status&&(!d.responseURL||0!==d.responseURL.indexOf("file:")))return;const o="getAllResponseHeaders"in d?g()(d.getAllResponseHeaders()):null,t={data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:o,config:n,request:d};d.status>=200&&d.status<300||304===d.status?I(e,n,d,t):I(e,n,d,new(i())("Network Error",i().ERR_NETWORK,n,d,t),!0),d=null}())})(n)}catch(e){return{code:"-1",msg:"Unexpected Error in SyncXhrAdapter",error:e}}return{code:"0",msg:"SyncXhrAdapter Work Expectant"}}}(e),e.interceptors.request.forEach=e.interceptors.response.forEach=function(){},e.interceptors.response.handlers.unshift({fulfilled:h}),e}var C=o(656716);const b=(()=>{if("undefined"==typeof window)return t.A;const e=y(t.A.create({baseURL:gbCommonInfo.langPath,headers:{common:{"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}}));return e.interceptors.request.use((e=>(e.headers["x-csrf-token"]=gbCommonInfo.csrf_token,e))),e.interceptors.request.use(C.o0),e.interceptors.request.use(C.G0),e.interceptors.request.use(C.D7),e.interceptors.response.use((0,C.Qm)(e)),e.interceptors.response.use(C.t0),e.interceptors.response.use(C.X2.success,C.X2.error),e.interceptors.response.use((e=>{var n;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse?e:e.data}),(e=>{var n,o;throw null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.getResponse||!e.request?e:e.request})),window.schttpSync=e,e})()}}]);
//# sourceMappingURL=schttp-chunk-e6675b23f0e2627b.js.map