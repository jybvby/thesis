"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[92100],{120130:(e,o,t)=>{t.d(o,{C:()=>i});const i=(e={},o=[],t=!1)=>{const{showPromoLabel:i,showSheinClubDiscountValue:s,showAddWishlist:n,showNewFlashPrice:l,showMultiColor:a,showSeriesBrand:r,showPromotion:d,showBadge:u,showQuickShip:c,showSellingPoint:m,showNewFlashPriceOnSale:g,flashZonePromotion:h,locateLabels:p,showBeltLabel:_,showEstimateTag:f,showEstimatedPriceReachThreshold:I,showPlusSize:P,showNewFlashLabel:v,showRankingList:b,showUserBehaviorLabel:y,showDecisionAttr:S,showStarComment:E,showPriceDiscountDesc:w,showSheinClubLabelInServicesLabel:C,showUserCommentKeywordsLabel:N,showEstimatedPriceOnSale:G,showPropertyUpsell:L,showHorseRaceLabel:K}=e,k={machine_label:[]},T=[];a&&T.push("relatedProducts"),h&&T.push("flashZonePromotion"),(d||s)&&T.push("promotion"),P||T.push("plusSize"),m&&T.push("sellingPoints"),r&&T.push("seriesAndBrand"),u&&T.push("cccTspBadges"),(s||C)&&(T.push("sheinClubPromotionInfo"),T.push("vipDiscountPrices")),c&&T.push("quickShip"),(l||g)&&T.push("newFlashPromotion"),i&&T.push("promoLabel"),b&&T.push("rankingList"),S&&T.push("enableDecisionAttr"),y&&T.push("userBehaviorLabel"),E&&T.push(t?"recommendStarComment":"starComment"),w&&T.push("priceDiscountDesc"),n&&T.push("wish"),p&&T.push("locateLabels"),_&&T.push("beltLabel"),(f||I||G)&&T.push("estimatedPrice"),v&&T.push("showNewFlashLabel"),k.machine_label.length&&T.push("realTimeTspLabels"),N&&T.push("userCommentKeywordsLabel"),K&&T.push("horseRaceLabel"),L&&T.push("cornerPropertyUpsell");return(o.length?[...new Set(T.concat(o))]:T).reduce(((e,o)=>(e[o]="realTimeTspLabels"===o?k:"tspLabels"!==o||"c7d_click_pv,c7d_wishlist_uv,c7d_sale_cnt,eval_cnt",e)),{})}},230484:(e,o,t)=>{t.d(o,{A:()=>l,d:()=>n});var i=t(837028),s=t(665640);function n(e,o=null){let t=e?parseInt(e).toFixed(0):"";return t?(0,i.v)({val:t},o):""}const l={percentNum:function(e){return`${parseInt(100-Math.round(100*e+Number.EPSILON)).toFixed(0)}%`},discountNumCn:function(e){return""+1*parseInt(10*e).toFixed(2)},percentNumWithoutSign:function(e){return`${parseInt(100-Math.round(100*e+Number.EPSILON)).toFixed(0)}`},logBrowser:function(e="",o=""){s.log(`[PromotionCenter] ${e}`,o)},percentNumSign:n,decimalToPercent:function(e){return`${parseInt(100-Math.round(100*e+Number.EPSILON)).toFixed(0)}%`},numberToPercentage:function(e){let o=e?parseInt(e).toFixed(0):"";return o?`${o}%`:""}}},239042:(e,o,t)=>{t.d(o,{O:()=>n});var i=t(537915);const s=({productItem:e=null,key:o=null,value:t=null}={})=>{e&&o&&(e.pretreatInfo||(e.pretreatInfo={}),e.pretreatInfo[o]=t)},n=({products:e,promotionInfoFromServer:o,language:t})=>((({products:e=[],promotionInfoFromServer:o={},language:t={}}={})=>{i.f.assignItemsSync({items:e,isGetLable:!0,isAppPromotion:!0,promotionInfoFromServer:o,language:t}),e.forEach((e=>{const o=(e.promotionModule.rawModule||[]).filter((e=>{if(+e.typeId){if(31==+e.typeId)return 3===e.promotion_logo_type;if([3,10,11].includes(+e.typeId))return!0;if(e.lable)return!0}return!1}))||[];(({productItem:e,mixPromotionInfo:o}={})=>{var t,i,s,n;const l=({serviceLabels:e})=>{var t;const i=null===(t=o[0])||void 0===t?void 0:t.lable,s=e.findIndex((e=>e.promotionLabel));s>-1&&(i?e[s].promotionLabel=i:e.splice(s,1))};l({serviceLabels:(null==e||null===(t=e.pretreatInfo)||void 0===t||null===(i=t.pcStandardView)||void 0===i?void 0:i.serviceLabels)||[]}),l({serviceLabels:(null==e||null===(s=e.pretreatInfo)||void 0===s||null===(n=s.pcBroadwiseView)||void 0===n?void 0:n.serviceLabels)||[]})})({productItem:e,mixPromotionInfo:o}),s({productItem:e,key:"mixPromotionInfo",value:o}),s({productItem:e,key:"promotionReady",value:!0})}))})({products:e,promotionInfoFromServer:o,language:t}),e)},537915:(e,o,t)=>{t.d(o,{f:()=>y});var i=t(605045),s=t(890833),n=t(466786),l=t(294031);const{percentNum:a,percentNumWithoutSign:r}=i.L,{DEBUG:d}=s.A;const{NeedDealPromotionTypeIds:u,PriorityPromotionTypeIds:c,TitlePromotionTypeIds:m,IconPromotionTypeIds:g,BrandProductPromotionTypeIds:h}=s.A;class p{constructor({item:e=[],integrityPromotionInfo:o={},language:t={}}={}){this.rawModule=[],this.integrityPromotionInfo=o,this.content={},this.register({item:e,language:t})}register({item:e,language:o}){var t;const s=e.promotionInfo;this.rawModule=null!=s&&s.length?s.map((t=>{const s={},{typeId:n,id:l,buyLimit:a,soldNum:r,promotion_logo_type:d,promotionLogoType:u}=t,m=31!=+n||3===d||3===u;if(c.includes(+n)&&m){const n={p:t,language:o,options:{}};let d={};a&&!t.originBuyLimit&&(d.originBuyLimit=a),r&&!t.originSoldNum&&(d.originSoldNum=r),n.options=i.L.assignOptions({item:e,p:Object.assign(t,this.integrityPromotionInfo[l]||{},d)});const u=this.transformPromotionsContent(n);Object.assign(s,t,u,this.integrityPromotionInfo[l]||{})}return s.typeId=Number(n),s.sortIndex=c.indexOf(Number(n)),s})).sort(((e,o)=>e.sortIndex-o.sortIndex)):[],this.rawModule.length>1&&14==this.content.typeId&&"1"==(null===(t=this.integrityPromotionInfo[this.content.id])||void 0===t?void 0:t.isFullShop)&&(this.content=this.rawModule.find((e=>!(14==e.typeId&&"1"==e.isFullShop))))}transformPromotionsContent({p:e,language:o,options:t={}}={}){const{typeId:s,id:c,brandName:p="",mainProductRange:_}=e;var f,I;if(this.content.isVipItem=Boolean(12==s),this.content.isMoreDiscount=Boolean(t.isMoreDiscount),this.content.isLimitedItem=Boolean(t.isLimitedItem),Object.entries(m).some((([e,t])=>{if(t.includes(+s))return this.content.title=`${4==_&&h.includes(+s)?p:""} ${o[e]}`,!0})),Object.entries(g).some((([e,o])=>{if(o.includes(+s))return this.content.icon=e,!0})),[3,8].includes(+s))this.content.countDownSingle=(null===(f=this.integrityPromotionInfo[c])||void 0===f||null===(I=f.integrityContent)||void 0===I?void 0:I.countDown)||void 0;else if([10,11].includes(+s)){const{isCountdown:o,endTimestamp:t}=e;this.content.countDown="1"==o?i.L.countDownTime({endTimestamp:t}):""}else{var P,v;this.content.countDown=(null===(P=this.integrityPromotionInfo[c])||void 0===P||null===(v=P.integrityContent)||void 0===v?void 0:v.countDown)||void 0}if(u.includes(+s)){const u=function({language:e={},integrityPromotionInfo:o={},originPromotionInfo:t={},id:s="",typeId:u="",options:c={}}){const m={},g=Boolean(o[s]),h=Object.assign({},o[s]||{},t);let{rangeList:p=[],ruleCrondType:_="",ruleType:f="",buyLimit:I="",discountValue:P="",singleLimitType:v="",singleNum:b="",orderNum:y="",soldNum:S="",endTimestamp:E="",mainProductRange:w,brandName:C,rules:N}=h;const{lang:G}=gbCommonInfo;if(m.id=s,m.typeId=u,m.tips={text:"",list:[]},m.tip="",m.difference={text:"",diff:"",diffAmount:null,diffType:""},m.action=0,m.tipsIndex=0,m.lable="",m.rules=N||[],d&&i.L.logBrowser("integrityPromotionInfo",o[s]),1==u)g&&(m.tips.list[0]="sale_discount"==f?(0,n.v)(I,r(P),e.SHEIN_KEY_PC_18177):(0,n.v)(I,r(P),e.SHEIN_KEY_PC_18176),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(2==u)g&&(m.tips.list[0]=4==w?(0,n.v)(I,C,e.SHEIN_KEY_PC_21328):(0,n.v)(I,e.SHEIN_KEY_PC_21327),m.tips.text=m.tips.list[0]||""),m.lable=4==w?(0,n.v)(C,e.SHEIN_KEY_PC_21336):e.SHEIN_KEY_PC_16033;else if(3==u)m.tips.text=c.isMoreDiscount?e.SHEIN_KEY_PC_18042:e.SHEIN_KEY_PC_15951;else if(4==u)m.lable=e.SHEIN_KEY_PC_16033;else if(8==u)m.lable=e.SHEIN_KEY_PC_18000;else if(9==u)p.length&&(p.forEach(((o,t)=>{var i;"sale_discount"==f?m.tips.list[t]=(0,n.v)(o.buyLimit.amount,(100*(1-o.discountValue.amount)).toFixed(0),e.SHEIN_KEY_PC_17083):["hk","tw"].includes(G)?m.tips.list[t]=(0,n.v)(o.buyLimit.amount,(10*o.discountValue.amount).toFixed(1),e.SHEIN_KEY_PC_14555):m.tips.list[t]=(0,n.v)(o.buyLimit.amount,(100*(1-o.discountValue.amount)).toFixed(0)+"%",null===(i=e.SHEIN_KEY_PC_14555)||void 0===i?void 0:i.replace("%",""))})),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(10==u||11==u){if(Object.keys(t).length){const o=Date.now(),t={1:(0,n.v)(b,e.SHEIN_KEY_PC_17383),2:"",3:(0,n.v)(b,e.SHEIN_KEY_PC_17383)}[v]||"";m.tips.list[0]=Number(I)>Number(S)&&o<Number(E)?t:"",m.tips.text=m.tips.list[0]||""}}else if(13==u)p.length&&(p.forEach(((o,t)=>{const i=o.ruleDimension,s=o.buyLimit.amountWithSymbol,a=o.buyLimit.amount,d=o.redemption[0].price.amountWithSymbol,u=o.redemption[0].price.amount;"quantity"==f?"price"==i?m.tips.list[t]=(0,n.v)(a,d,(0,l.C)({text:e.SHEIN_KEY_PC_17204})):"discount"==o.ruleDimension&&(m.tips.list[t]=(0,n.v)(a,r(u),(0,l.C)({text:e.SHEIN_KEY_PC_17202}))):"price"==o.ruleDimension?m.tips.list[t]=(0,n.v)(s,d,(0,l.C)({text:e.SHEIN_KEY_PC_17205})):"discount"==o.ruleDimension&&(m.tips.list[t]=(0,n.v)(s,r(u),(0,l.C)({text:e.SHEIN_KEY_PC_17203})))})),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_15966;else if(14==u)m.lable=e.SHEIN_KEY_PC_16032,m.rules.length&&m.rules.forEach(((o,t)=>{var i;let{type:s,value:l,value_amount:a,discount:r}=o||{},d=null==r||null===(i=r.value_amount)||void 0===i?void 0:i.amountWithSymbol,u=null==a?void 0:a.amountWithSymbol,c={1:(0,n.v)(d,l,e.SHEIN_KEY_PC_17542),2:(0,n.v)(l,d,e.SHEIN_KEY_PC_29568),3:(0,n.v)(d,u,e.SHEIN_KEY_PC_17541),4:(0,n.v)(u,d,e.SHEIN_KEY_PC_29567)};c[s]&&(m.tips.list[t]=c[s])})),p.length&&(m.tips.text=m.tips.list[0]||"",N.find((e=>4==e.type))?m.lable=(0,n.v)(p[0].buyLimit.amountWithSymbol,p[0].discountValue.amountWithSymbol,e.SHEIN_KEY_PC_29567):N.find((e=>2==e.type))?m.lable=(0,n.v)(p[0].buyLimit.amount,p[0].discountValue.amountWithSymbol,e.SHEIN_KEY_PC_29568):m.lable=1==_?(0,n.v)(p[0].discountValue.amountWithSymbol,p[0].buyLimit.amountWithSymbol,e.SHEIN_KEY_PC_17541):(0,n.v)(p[0].discountValue.amountWithSymbol,p[0].buyLimit.amount,e.SHEIN_KEY_PC_17542));else if(15==u)m.lable=e.SHEIN_KEY_PC_16032,p.length&&(p.forEach(((o,t)=>{const i=o.discountValue.amountWithSymbol,s=o.buyLimit.amount;1==_?m.tips.list[t]=(0,n.v)(i,s,e.SHEIN_KEY_PC_15975):2==_&&(m.tips.list[t]=(0,n.v)(i,s,e.SHEIN_KEY_PC_15976))})),m.tips.text=m.tips.list[0]||"",m.lable=(0,n.v)(p[0].discountValue.amountWithSymbol,p[0].buyLimit.amount,e.SHEIN_KEY_PC_17543));else if(16==u)p.length&&(2==p.length?m.tips.list[0]=(0,n.v)(p[0].discount.amountWithSymbol,p[1].discount.amountWithSymbol,e.SHEIN_KEY_PC_16156):1==p.length&&(m.tips.list[0]=(0,n.v)(p[0].discount.amountWithSymbol,e.SHEIN_KEY_PC_16154)),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(17==u)p.length&&(2==p.length?m.tips.list[0]=(0,n.v)(a((100-100*p[0].discount.amount).toFixed(0)),a((100-100*p[1].discount.amount).toFixed(0)),e.SHEIN_KEY_PC_16155):1==p.length&&(m.tips.list[0]=(0,n.v)(a((100-100*p[0].discount.amount).toFixed(0)),e.SHEIN_KEY_PC_16153)),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(18==u)p.length&&(2==p.length?m.tips.list[0]=(0,n.v)(p[0].discount.amountWithSymbol,p[1].discount.amountWithSymbol,e.SHEIN_KEY_PC_16156):1==p.length&&(m.tips.list[0]=(0,n.v)(p[0].discount.amountWithSymbol,e.SHEIN_KEY_PC_16154)),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(19==u)p.length&&("sale_discount"==f?2==p.length?m.tips.list[0]=(0,n.v)(r(p[0].discount.amount),r(p[1].discount.amount),e.SHEIN_KEY_PC_17085):1==p.length&&(m.tips.list[0]=(0,n.v)(r(p[0].discount.amount),e.SHEIN_KEY_PC_17084)):2==p.length?m.tips.list[0]=(0,n.v)(a(p[0].discount.amount),a(p[1].discount.amount),e.SHEIN_KEY_PC_16155):1==p.length&&(m.tips.list[0]=(0,n.v)(a(p[0].discount.amount),e.SHEIN_KEY_PC_16153)),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032;else if(20==u)p.length&&(p.forEach(((o,t)=>{const i=o.coupon,s=o.buyLimit.amountWithSymbol,a=i.priceSymbol;"0"!=i.isFreeShipCoupon||"0"!=i.isMemberFreeShipCoupon?m.tips.list[t]=(0,n.v)(s,(0,l.C)({text:e.SHEIN_KEY_PC_16152})):(i.couponTypeId,m.tips.list[t]=(0,n.v)(s,a,(0,l.C)({text:e.SHEIN_KEY_PC_16150})))})),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16035;else if(24==u){if(g){b=Number(b),y=Number(y);const o={sale_discount:()=>`${e.SHEIN_KEY_PC_17488}${b?(0,n.v)(Number(b),e.SHEIN_KEY_PC_17489):""}${y?(0,n.v)(Number(y),e.SHEIN_KEY_PC_17493):""}`,no_discount:()=>`${b&&y?(0,n.v)(Number(b),e.SHEIN_KEY_PC_17489):b?(0,n.v)(Number(b),e.SHEIN_KEY_PC_17495):""}${y?(0,n.v)(Number(y),e.SHEIN_KEY_PC_17496):""}`},t="no_discount"==f?"no_discount":"sale_discount";m.tips.list[0]=o[t]()||"",m.tips.text=m.tips.list[0]||"",m.tip=m.tips.text+m.difference.text,m.tipsIndex=0,m.lable="no_discount"==f?"":e.SHEIN_KEY_PC_17484}}else 25==u?(p.length&&(p.forEach(((o,t)=>{m.tips.list[t]="sale_discount"==f?(0,n.v)(o.buyLimit.amountWithSymbol,a(o.discountValue.amount),e.SHEIN_KEY_PC_17835):(0,n.v)(o.buyLimit.amountWithSymbol,a(o.discountValue.amount),e.SHEIN_KEY_PC_17836)})),m.tips.text=m.tips.list[0]||""),m.lable=e.SHEIN_KEY_PC_16032):28==u&&(p.forEach(((o,t)=>{m.tips.list[t]=4==w?(0,n.v)(C,o.buyLimit.amountWithSymbol,e.SHEIN_KEY_PC_21326):(0,n.v)(o.buyLimit.amountWithSymbol,e.SHEIN_KEY_PC_21325)})),m.lable=4==w?(0,n.v)(C,e.SHEIN_KEY_PC_21336):e.SHEIN_KEY_PC_16033,m.tips.text=m.tips.list[0]||"");return m}({id:c,typeId:s,language:o,integrityPromotionInfo:this.integrityPromotionInfo,options:t,originPromotionInfo:e});this.content=Object.assign(this.content,u)}return Object.assign({},this.content)}}var _=t(566426),f=t(633208),I=t(383112);const{NeedFetchPromotionTypeIds:P,FetchPromotionLableTypeIds:v}=s.A;class b{constructor(){this.cache={integrityPromotionInfo:{}},this.language={}}async assignItems({items:e=[],language:o=this.language||{},isGetLable:t=!1,isGetVipPrice:i=!1,isGetSheinClubPrice:s=!1,isAppPromotion:n=!1,isGetNewFlashPromotion:l=!1,caller:a=""}={}){Object.keys(o).length||(this.language=o=await _.A.loadByQueue("promotion"));const r=[].concat(e),d=[],u=t?v:P,c=[],m=[];let g=!1,h=!1,f=!1;r.forEach((e=>{e.promotionInfo&&e.promotionInfo.forEach((o=>{const{id:t,typeId:n,flash_type:a,flashType:r}=o,p=a||r;u.includes(+n)&&!d.includes(t)&&d.push(t);const{goods_id:_,goods_sn:I,mall_code:P}=e,v={goods_id:_,goods_sn:I,mall_code:P};i&&12==n?(g=!0,v.promotionId=t,c.push(v)):s&&29==n?(h=!0,v.promotionId=t,c.push(v)):l&&10==n&&[2,3,4].includes(p&&Number(p))&&(f=!0,v.promotionId=t,m.push(v))})),n&&e.appPromotion&&(e.promotionInfo=e.promotionInfo.concat(e.appPromotion))}));const[I,b]=await Promise.all([this.getVipPrice({goodsParams:c,vipDiscountPrices:g,sheinClubPromotionInfo:h,caller:a}),this.getNewFlashPromotion({flashPromotionParams:m,newFlashPromotion:f,caller:a})]);let y=await this.setIntegrityPromotionInfo({ids:d});return y=Object.assign({},y,{}),r.forEach((e=>{var t,i;e.promotionModule=new p({item:e,integrityPromotionInfo:y,language:o});const s=(null==I?void 0:I[e.goods_id])||{},n=e.exclusivePromotionPrice||(null==s?void 0:s.exclusivePromotionPrice),l=e.sheinClubPromotionInfo||(null==s?void 0:s.sheinClubPromotionInfo),a=e.newFlashPromotion||(null==b||null===(t=b[e.goods_id])||void 0===t?void 0:t.newFlashPromotion)||(null==b||null===(i=b[e.goods_id])||void 0===i?void 0:i.flashZonePromotion);n&&(e.vipPrice=n),l&&(e.sheinClubPromotionInfo=l),a&&(e.newFlashPromotion=a)})),{integrityPromotionInfo:y,vipPriceList:I,items:r}}assignItemsSync({items:e=[],language:o=this.language||{},isGetLable:t=!1,isGetVipPrice:i=!1,isGetSheinClubPrice:s=!1,isAppPromotion:n=!1,isGetNewFlashPromotion:l=!1,promotionInfoFromServer:a={}}={}){const r=[].concat(e),d=[],u=t?v:P;r.forEach((e=>{e.promotionInfo&&e.promotionInfo.forEach((o=>{const{id:t,typeId:n,flash_type:a,flashType:r}=o,c=a||r;u.includes(+n)&&!d.includes(t)&&d.push(t);const{goods_id:m,goods_sn:g,mall_code:h}=e,p={goods_id:m,goods_sn:g,mall_code:h};(i&&12==n||s&&29==n||l&&10==n&&[2,3].includes(c&&Number(c)))&&(p.promotionId=t)})),n&&Array.isArray(e.promotionInfo)&&e.appPromotion&&(e.promotionInfo=e.promotionInfo.concat(e.appPromotion))})),this.setCacheIntegrityPromotionInfo(a,o);let c={};for(const e of d)c[e]=this.cache.integrityPromotionInfo[e];return c=Object.assign({},c,{}),r.forEach((e=>{var t,i,s;e.promotionModule=new p({item:e,integrityPromotionInfo:c,language:o});let n=null,l=null,a=null;null!==(t=Object.keys(e.exclusivePromotionPrice||{}))&&void 0!==t&&t.length&&(n=e.exclusivePromotionPrice),null!==(i=Object.keys(e.sheinClubPromotionInfo||{}))&&void 0!==i&&i.length&&(l=e.sheinClubPromotionInfo),null!==(s=Object.keys(e.newFlashPromotion||{}))&&void 0!==s&&s.length&&(a=e.newFlashPromotion),n&&(e.vipPrice=n),l&&(e.sheinClubPromotionInfo=l),a&&(e.newFlashPromotion=a)})),{integrityPromotionInfo:c,vipPriceList:void 0,items:r}}setIntegrityPromotionInfo({ids:e=[]}={}){const o=[],t={};return e&&e.length&&e.forEach((e=>{void 0===this.cache.integrityPromotionInfo[e]?(t[e]={},o.push(e)):t[e]=this.cache.integrityPromotionInfo[e]})),o.length?(0,I.A)({url:"/api/cart/getIntegrityPromotionInfo/get",method:"POST",data:{ids:e}}).then((e=>("0"==e.code&&e.info&&e.info.length>0&&e.info.forEach((e=>{this.dealIntegrityPromotionInfo(e),t[e.id]=this.cache.integrityPromotionInfo[e.id]=e})),t))).catch((()=>t)):Promise.resolve(t)}dealIntegrityPromotionInfo(e){const o={},{isCountdown:t,endTimestamp:s}=e;"1"==t&&s&&(o.countDown=i.L.countDownTime({endTimestamp:s}),o.countDownTimeStamp=1e3*s),e.integrityContent=o}async getVipPrice({goodsParams:e=[],vipDiscountPrices:o,sheinClubPromotionInfo:t,caller:i=""}){if(null==e||!e.length||!o&&!t)return{};return await f.A.getAtomicInfo({goods:e,fields:{vipDiscountPrices:o,sheinClubPromotionInfo:t},needAssign:!1,...i?{caller:i}:{}})}async getNewFlashPromotion({flashPromotionParams:e,newFlashPromotion:o,caller:t}){if(null==e||!e.length||!o)return{};return await f.A.getAtomicInfo({goods:e,fields:{newFlashPromotion:o,flashZonePromotion:1},needAssign:!1,caller:t})}setCacheIntegrityPromotionInfo(e={},o={}){Object.keys(o).length&&(this.language=o),"0"==e.code&&e.info&&e.info.length>0&&e.info.forEach((e=>{this.dealIntegrityPromotionInfo(e),this.cache.integrityPromotionInfo[e.id]=e}))}}const y="undefined"!=typeof window?window.promotionCenter=window.promotionCenter||new b:new b},598807:(e,o,t)=>{t.d(o,{C:()=>h});var i=t(121544),s=t(855574),n=t(466786),l=t(294031),a=t(537915),r=t(633208),d=t(673076),u=t(977456),c=t(99114),m=t(239042),g=t(632079);class h{constructor({listLanguage:e={},getGoodsUrl:o="",itemConfig:t}={}){this.listLanguage=e,o&&(this.getGoodsUrl=o),"undefined"!=typeof window&&(this.itemConfig=t||{},this.language=gbCommonInfo&&gbCommonInfo.language,this.IS_RW=gbCommonInfo&&gbCommonInfo.IS_RW,this.lang=gbCommonInfo&&gbCommonInfo.lang,this.GB_cssRight=gbCommonInfo&&gbCommonInfo.GB_cssRight,this.csrfToken=gbCommonInfo&&gbCommonInfo.csrf_token||"",this.getGoodsUrl=g.qK,this.htmlDecode=e=>(0,l.C)({text:e}),this.mallInfoForSite=[],this.atomFields={})}async getProductInfo({goods:e=[],requestFields:o={},itemConfig:t={},pageKey:i="",subPageKey:s="",sceneKey:n="TWO_IN_A_ROW",cccParams:l,caller:a,isPaid:m}={}){var g;if(!e.length||"undefined"==typeof window)return;this.fields=o||{},this.itemConfig=t||{},this.pageKey=i,this.subPageKey=s,this.sceneKey=n,this.caller=a,this.cccParams=l,this.isPaid=m,this.atomFields={...this.fields};const h=[(0,u.c)(),r.A.getAtomicInfo({goods:e,fields:this.atomFields,pageKey:i,subPageKey:s,sceneKey:n,caller:a,cccParams:l,isPaid:m,cb:e=>{this.dealExt({goodsItem:e})}})];this.abtInfo={};const p=[];(0,d.dm)({pageKey:s||i})&&o.cccTspBadges&&p.push("NewPosition"),p.join()&&h.push(new Promise((e=>{c.T.getUserAbtResult({newPosKeys:p}).then((o=>{this.abtInfo=o,e()}))})));const[_]=await Promise.all(h);return this.mallInfoForSite=null!=_&&null!==(g=_.mallInfoForSite)&&void 0!==g&&g.length?_.mallInfoForSite:[],await this.getAssociatedPromotionInfo({goods:e,caller:this.caller}),e.forEach((e=>{this.dealData({goodsItem:e}),(0,d.GG)({goodsItem:e,field:"getInfoLoading",value:!1})})),Promise.resolve(e)}async getRelateColorProductInfo({goods:e=[],colorAtomFields:o,pageKey:t,subPageKey:s,sceneKey:n,caller:l,cccParams:a,isPaid:u}={}){if(!e.length||"undefined"==typeof window)return;let c=[];if(e.forEach((e=>{var o;null!==(o=e.relatedColor)&&void 0!==o&&o.length&&(c=c.concat(e.relatedColor))})),!c.length)return;Object.assign(this.atomFields,{baseInfo:!0});const m=await r.A.getAtomicInfo({goods:c,fields:o||this.atomFields,pageKey:t||this.pageKey,subPageKey:s||this.subPageKey,sceneKey:n||this.sceneKey,caller:l||this.caller,cccParams:a||this.cccParams,isPaid:u||this.isPaid,cb:e=>{this.dealExt({goodsItem:e})}});await this.getAssociatedPromotionInfo({goods:m,caller:this.caller}),m.forEach((e=>{(0,d.GG)({goodsItem:e,field:"getInfoLoading",value:!0}),e.goods_img=(0,i.Y)({img:e.goods_img}),this.dealData({goodsItem:e}),this._preloadImgs(e)}))}async getRelatedColorAtomicInfo({goods:e,colorAtomFields:o,pageKey:t,sceneKey:i,subPageKey:s,caller:n,cccParams:l,isPaid:a,mallInfo:d,abtInfo:u,promotionInfoFromServer:c,language:g}){let h=[];e.forEach((e=>{var o;null!==(o=e.relatedColor)&&void 0!==o&&o.length&&(h=h.concat(e.relatedColor))})),h.length&&(await r.A.getAtomicInfoNew({goods:h,fields:o,pageKey:t,subPageKey:s,sceneKey:i,caller:n,cccParams:l,isPaid:a,mallInfo:d,abtInfo:u,cb:e=>{this.dealExt({goodsItem:e})}}),e=(0,m.O)({products:h,promotionInfoFromServer:c,language:g}))}dealData({goodsItem:e}){this.dealSaleout({goodsItem:e}),this.dealUnitDiscount({goodsItem:e}),this.dealBadge({goodsItem:e,abtInfo:this.abtInfo}),this.dealSeriesBrandAnalysis({goodsItem:e}),this.dealSeriesBrandLogo({goodsItem:e}),this.dealPlusSize({goodsItem:e}),this.dealLeftStock({goodsItem:e}),this.dealLinkQuantity({goodsItem:e}),this.dealReducePrice({goodsItem:e}),this.dealWishStatus({goodsItem:e}),this.dealSellingPoints({goodsItem:e}),this.dealLocalShipping({goodsItem:e}),this.dealSellAttr({goodsItem:e}),this.dealTspLabels({goodsItem:e}),this.dealDisplayWindowInfo({goodsItem:e})}async _preloadImgs(e){var o;const t=async(e,o)=>{await(0,s.m)({imgs:e}),(0,d.GG)({goodsItem:o,field:"getInfoLoading",value:!1})};let n=[];n.push(e.goods_img);const l=null==e||null===(o=e.detail_image)||void 0===o?void 0:o[0],a=(null==l?void 0:l.medium_image)||l;a&&"string"==typeof a&&n.push((0,i.Y)({img:a})),window.requestIdleCallback?window.requestIdleCallback((async()=>{t(n,e)})):t(n,e)}async getAssociatedPromotionInfo({goods:e=[],caller:o}={}){await a.f.assignItems({items:e,isGetLable:!0,isGetVipPrice:!0,isAppPromotion:!0,caller:o}),e.forEach((e=>{var o;const{promotionModule:t,newFlashPromotion:i}=e,{price:s,id:l,typeId:a}=i||{};null==t||null===(o=t.rawModule)||void 0===o||o.forEach((o=>{const{flash_type:t}=o;switch(Number(null==o?void 0:o.typeId)){case 24:o.limitBuyPromotionTip=o.tips.text,"no_discount"!=o.ruleType&&(0,d.GG)({goodsItem:e,field:"label",value:"Limited Stock"});break;case 12:e.exclusivePromotionPrice=e.vipPrice;break;case 29:break;case 10:if(2==t||3==t){if(!i)return;let o=this.listLanguage.SHEIN_KEY_PC_23047;3==t&&(o=this.listLanguage.SHEIN_KEY_PC_23051),(0,d.GG)({goodsItem:e,field:"newFlashPromotion",value:{id:l,typeId:a,flash_type:t,price:s,flashTypeText:o}})}else(0,d.GG)({goodsItem:e,field:"flashsale",value:{info:o,saleProcess:o.soldNum/o.buyLimit*100,message:{soldNum:`${(0,n.v)(o.soldNum,this.language.SHEIN_KEY_PC_14587)}`,soldPercent:`${(o.soldNum/o.buyLimit*100).toFixed(0)}%`}}});break;case 8:(0,d.GG)({goodsItem:e,field:"apponly",value:!0})}})),(0,d.GG)({goodsItem:e,field:"mixPromotionInfo",value:t.rawModule}),(0,d.GG)({goodsItem:e,field:"promotionReady",value:!0}),(0,d.GG)({goodsItem:e,field:"newFlashPromotionReady",value:!0})}))}dealExt({goodsItem:e=null}={}){if(!e)return;const o=e.ext,t=e.dynamic_ext;o&&(o.other_ext_mark=Object.keys(o).reduce(((e,t)=>("rec_mark"!=t&&"extra_mark"!=t&&e.push(`${t}_${o[t]}`),e)),[]).join("|")),t&&(t.other_d_ext_mark=Object.keys(t).map((e=>`${e}_${t[e]}`)).join("|"))}dealUnitDiscount({goodsItem:e=null}={}){var o;if(!e||(!e.unit_discount||0===Number(e.unit_discount))&&!e.newFlashPromotion)return;let t={};const i=null===(o=e.newFlashPromotion)||void 0===o?void 0:o.discount_percent,s=i||e.unit_discount;t.unitDiscountString=s?`${"il"!==this.lang?"-":""}${s}%`:"",t.newFlashDiscount=i,(0,d.GG)({goodsItem:e,field:"discountInfo",value:{...t,show:!!t.unitDiscountString}})}async dealBadge({goodsItem:e=null,abtInfo:o}={}){if(!e||!e.badges||!this.fields.cccTspBadges)return void(0,d.GG)({goodsItem:e,field:"badgesReady",value:!0});const{P_UPPER_LEFT:t,P_BOTTOM_LEFT:i,BELOW_PRICE:s}=e.badges,n=e=>70007016==e,l=(o,t)=>{var i,s;const{name:l,"name-en":a,backgroundColor:r,fontColor:u,id:c}=t[0],m={text:l,fontColor:u,backgroundColor:r,code:`show_label_${(null==a||null===(i=a.split(" "))||void 0===i||null===(s=i.join("_"))||void 0===s?void 0:s.toLowerCase())||""}`,isLowInStock:n(c)};(0,d.GG)({goodsItem:e,field:o,value:m})};if(t){var a,r;let e="imgUpperLeft";"FrontTitle"==(null==o||null===(a=o.NewPosition)||void 0===a||null===(r=a.p)||void 0===r?void 0:r.NewPosition)&&(e="frontTitle"),l(e,t)}i&&l("imgBottomLeft",i),s&&l("goodsBottom",s),(0,d.GG)({goodsItem:e,field:"badgesReady",value:!0})}dealSeriesBrandAnalysis({goodsItem:e=null,IS_RW:o=!1}={}){if(!e)return;"undefined"!=typeof window&&(o=this.IS_RW);const{image_url:t,name:i}=e.series||e.series_badge||{},{name:s,brand_logo:n}=e.brand||e.brand_badge_new||{},l=!o&&i?`${i} `:"";let a="";l&&t?a=`series_${l.toLowerCase()}`:o&&1==e.isAlone?a="series_romweoriginals":s&&n&&(a=`brand_${s.toLowerCase()}`),(0,d.GG)({goodsItem:e,field:"seriesOrBrandAnalysis",value:a})}async dealSeriesBrandLogo({goodsItem:e=null}={}){if(!e)return;const o=e.series||e.series_badge||{},t=e.brand||e.brand_badge_new||{};if(this.IS_RW)o.image_url?(0,d.GG)({goodsItem:e,field:"seriesOrBrandLogoBottom",value:o.image_url}):e.isAlone&&1===Number(e.isAlone)&&(0,d.GG)({goodsItem:e,field:"romweoriginals",value:this.listLanguage.SHEIN_KEY_PC_17141});else{const i=this.GB_cssRight?o.corner_img_right:o.corner_img_left;i&&(0,d.GG)({goodsItem:e,field:"seriesLogo",value:i});const s=t.corner_img_left;s&&(0,d.GG)({goodsItem:e,field:"brandLogo",value:s})}}dealGoodsDetailUrl({goodsItem:e=null,query:o={}}={}){var t;if(!e)return;let i=null===(t=this.getGoodsUrl)||void 0===t?void 0:t.call(this,e.goods_url_name,e.goods_id,e.cat_id);if(o&&"[object Object]"===Object.prototype.toString.call(o)){let e=[];Object.keys(o).forEach((t=>{o[t]&&e.push(`${t}=${o[t]}`)})),e.length>0&&(i+=`?${e.join("&")}`)}e.detail_url=i}dealPlusSize({goodsItem:e=null}){if(e&&e.is_show_plus_size&&0!==Number(e.is_show_plus_size)){var o;if(!(this.IS_RW||null!=e&&null!==(o=e.pretreatInfo)&&void 0!==o&&o.seriesLogo)){const o=this.GB_cssRight?"curve-plus-r-52ab3e3dc6.png":"curve-plus-b50bac3f89.png";(0,d.GG)({goodsItem:e,field:"seriesLogo",value:`/she_dist/images/plusSize/${o}`}),(0,d.GG)({goodsItem:e,field:"plusSizeDefault",value:!0})}(0,d.GG)({goodsItem:e,field:"plusSize",value:this.listLanguage.SHEIN_KEY_PC_16973})}}dealSaleout({goodsItem:e=null}){if(!e)return;const{stock:o,attrValueId:t,sizeStock:i,sku_code:s}=e,n=s||+t?i:o;0!=+e.is_on_sale&&0!=+n||(0,d.GG)({goodsItem:e,field:"saleout",value:{show:!0,message:this.listLanguage.SHEIN_KEY_PC_14617}})}dealLeftStock({goodsItem:e=null}){if(!e||!this.itemConfig.showLeftStock&&!this.itemConfig.showLeftStockShein)return;const{stock:o,attrValueId:t,sizeStock:i,sku_code:s}=e,l=s||+t?i:o;+l>0&&+l<10&&(0,d.GG)({goodsItem:e,field:"stockLeft",value:(0,n.v)(l,this.listLanguage.SHEIN_KEY_PC_16400)}),(0,d.GG)({goodsItem:e,field:"stockLeftReady",value:!0})}dealLinkQuantity({goodsItem:e=null}){if(!e||!this.itemConfig.showLikeQuantity)return;let{count:o}=e;0==o&&(o=1),o&&o>999&&(o=Math.floor(o/1e3*10)/10+"k"),(0,d.GG)({goodsItem:e,field:"likeQuantity",value:{quantity:o,icon:"sui_icon_save_completed_16px",tip:`${o} ${this.listLanguage.SHEIN_KEY_PC_15512}`}})}dealReducePrice({goodsItem:e=null}){var o;this.itemConfig.showReducePrice&&(null!==(o=e.reducePrice)&&void 0!==o&&o.amountWithSymbol&&(0,d.GG)({goodsItem:e,field:"reducePrice",value:(0,n.v)(e.reducePrice.amountWithSymbol,this.listLanguage.SHEIN_KEY_PC_16553)}),(0,d.GG)({goodsItem:e,field:"reducePriceReady",value:!0}))}dealWishStatus({goodsItem:e=null}){this.itemConfig.showAddWishlist&&(0,d.GG)({goodsItem:e,field:"addWishlistResult",value:e.wishStatus})}dealSellingPoints({goodsItem:e=null}){if(null==e||!e.tag_result||!this.itemConfig.showSellingPoint)return(0,d.GG)({goodsItem:e,field:"sellingPointsReady",value:!0});let o=[];for(let t of e.tag_result)for(let e of t.tags)e.tag_id=t.tag_id,o.push(e);o=o.sort(((e,o)=>e.tag_sort-o.tag_sort)),(0,d.GG)({goodsItem:e,field:"sellingPoints",value:o}),(0,d.GG)({goodsItem:e,field:"sellingPointsReady",value:!0})}dealLocalShipping({goodsItem:e=null}){var o;if(!e||null===(o=this.mallInfoForSite)||void 0===o||!o.length)return(0,d.GG)({goodsItem:e,field:"localMallReady",value:!0});let t={};const{language_mall_name:i,mall_tags:s}=this.mallInfoForSite.find((o=>o.mall_code==e.mall_code))||{};if(!s)return(0,d.GG)({goodsItem:e,field:"mallTagsInfo",value:t}),void(0,d.GG)({goodsItem:e,field:"localMallReady",value:!0});const n=s.includes("4"),l=s.includes("5");Object.assign(t,{localMall:l&&!n,mall_tags:s,language_mall_name:i}),(0,d.GG)({goodsItem:e,field:"mallTagsInfo",value:t}),(0,d.GG)({goodsItem:e,field:"localMallReady",value:!0})}dealSellAttr({goodsItem:e}){if(!e||!this.itemConfig.showSellAttr||!e.sku_attr_list)return;const o=e.sku_attr_list.reduce(((e,o)=>(0===o.is_main&&e.push(o.attr_value_multi_name),e)),[]);(0,d.GG)({goodsItem:e,field:"sellAttr",value:o.join("/")})}syncWishStatus({goodsItem:e,params:{status:o}}){(0,d.GG)({goodsItem:e,field:"addWishlistResult",value:o})}dealTspLabels({goodsItem:e}){}dealDisplayWindowInfo({goodsItem:e}){var o,t,i;if(!e)return;let s=this.itemConfig.showUserCommentKeywordsLabel,n=null!==(o=e.userCommentKeywordsLabel)&&void 0!==o?o:{},l=null!==(t=null==n?void 0:n.labelLangEn)&&void 0!==t?t:"";if(s&&l){const o=`show_review_label_${l}`;(0,d.GG)({goodsItem:e,field:"userCommentKeywordsLabel",value:{...n,ana:o}})}else if(this.itemConfig.showUserBehaviorLabel){var a,r;const o=null===(a=e.pcStandardView)||void 0===a||null===(r=a.userBehaviorLabels)||void 0===r?void 0:r[0];var u,c;if(o)(0,d.GG)({goodsItem:e,field:"userBehaviorLabel",value:{...o,ana:["show_behavior_label",o.labelId,null===(u=o.labelLangEn)||void 0===u||null===(c=u.split(" "))||void 0===c?void 0:c.join("_")].join("_")}})}if(this.itemConfig.showBeltLabel&&(null===(i=e.pretreatInfo)||void 0===i||!i.showBestDeal)){var m;const o=null===(m=e.pcStandardView)||void 0===m?void 0:m.beltLabels;o&&(0,d.GG)({goodsItem:e,field:"beltLabel",value:{...o,ana:`belt_CCC${o.labelId}`}})}if(this.itemConfig.showRankingList){var g;const o=null===(g=e.pcStandardView)||void 0===g?void 0:g.rankingList;o&&(0,d.GG)({goodsItem:e,field:"rankingList",value:{...o,ana:`show_rank_type_${o.rankingType}`}})}}async addToBag({goodsItem:e=null,selectedSize:o="",skuCode:t="",hasAttr:i=!1}=null){var s;if(!e)return;let n={};if(null!=e&&null!==(s=e.pretreatInfo)&&void 0!==s&&s.addToBagLoading)return n.type="requesting",n;if(i&&!o)return n.type="noSelectSize",n.response={code:1},n;let l={goodsId:e.goods_id,mallCode:e.mall_code,quantity:1};t&&(l.skuCode=t);const a=gbExposeTraceid("getComponent",{componentName:"goodslist"});a&&(l.traceId=a),(0,d.GG)({goodsItem:e,field:"addToBagLoading",value:!0}),(0,d.GG)({goodsItem:e,field:"addToBagResult",value:""});const u=await r.A.addToBag(l);if(!u)return n.type="requestError",n;const{code:c,info:m,tips:g}=n.response=u||{};return 0==c&&m?n.type="success":(n.type="businessError",n.businessErrorCode=Number(c)),g&&(0,d.GG)({goodsItem:e,field:"addToBagResult",value:g}),(0,d.GG)({goodsItem:e,field:"addToBagLoading",value:!1}),n}async addWish({goodsItem:e=null,params:o,config:t}){return r.A.addWish({goodsItem:e,params:o,config:t})}async cancelWish({goodsItem:e=null,params:o}){return r.A.cancelWish({goodsItem:e,params:o})}}},605045:(e,o,t)=>{t.d(o,{L:()=>d});var i=t(230484),s=t(661880),n=t(383112),l=t(665640);const a={scLinkMap:{},get(e,o){if(this[e])return this[e][o];l.error("Module does not exist.")},set(e,o,t){this[e]?this[e][o]=t:l.error("Module does not exist.")}};function r({scId:e,mall_code:o,typeId:t,flash_type:i,flashType:l,url_prams:r="",entry_from:d="",src_module:u="",src_identifier:c="",src_tab_page_id:m=""}){return new Promise((g=>{if(10==t)if(6==(l||i)){g(`/brand-zone.html?entry_from=${d}&src_module=${u}&src_identifier=${c}&src_tab_page_id=${m}`)}else{let e=`/flash-sale.html?flash_type=${i||l||1}`;o&&(e+=`&mallCode=${o}`),g(e)}else if(30==t){g(`/under-prices-products.html?${r}`)}else e?a.get("scLinkMap",e)?g(a.get("scLinkMap",e)):(0,n.A)({url:"/api/productInfo/selectInfoByScId/get",params:{sc_id:e}}).then((t=>{if(t&&t.info&&t.info.scInfo&&t.info.scInfo.length){const{sc_url_id:i,select_name:n,select_type_name:l,sc_url:r}=t.info.scInfo[0];let d="";r?d=`${gbCommonInfo.langPath}${r}`:i&&n&&l&&(d=`${gbCommonInfo.langPath}/${l}/${n}-sc-${i}.html`),o&&(d+=(d.indexOf("?")>-1?"&mallCode=":"?mallCode=")+o),a.set("scLinkMap",e,d),g((0,s.p)({href:d}))}else g("")})):g("")}))}const d={...i.A,countDownTime:function({endTimestamp:e=0}){const o=1e3*e-(new Date).getTime(),t=Math.floor(o/1e3/60/60/24),i=Math.floor(o/1e3/60/60-24*t),s=Math.floor(o/1e3/60-24*t*60-60*i);return{diffTime:o,diffDays:t,diffHours:i,diffMinutes:s,diffSeconds:Math.floor(o/1e3-24*t*60*60-60*i*60-60*s)}},promotionLink:r,jumpToAdd:async function(e,o){let t=await r(e);if(t)if(null!=o&&o.source&&(t+=(t.indexOf("?")>-1?"&productsource=":"?productsource=")+o.source),"paidVip"===(null==o?void 0:o.scence))location.href=t;else{var i,s;const e=null===(i=window)||void 0===i||null===(s=i.open)||void 0===s?void 0:s.call(i,"","_blank");if(!e)return;e.location=t}},assignOptions:function({item:e,p:o}){const{original_discount:t="",unit_discount:i=""}=e;let s={};if(3==o.typeId){let e=t&&i&&0!==Number(t)&&Number(t)!=Number(i);s.isMoreDiscount=e}return([10,11].includes(Number(o.typeId))||24==o.typeId&&"no_discount"==o.ruleType&&!Number(o.orderNum)&&Number(o.singleNum))&&(s.isLimitedItem=!0),s}}},633208:(e,o,t)=>{t.d(o,{A:()=>c});var i=t(466786),s=t(294031),n=t(383112),l=t(566426),a=t(673076),r=t(99114),d=t(950357),u=t(665640);const c=new class{constructor(){"undefined"!=typeof window&&this.init()}async init(){this.language=await l.A.loadByQueue("item")}async getAtomicInfo({goods:e,fields:o={},needAssign:t=!0,pageKey:i,sceneKey:s,subPageKey:l,cb:r,caller:d,cccParams:u,isPaid:c,pricesWithPromotionSpecialSceneType:m}){const{reqParams:g,paramsErr:h}=(0,a.L5)({goods:e,fields:o,pageKey:i,subPageKey:l,sceneKey:s,caller:d,cccParams:u,isPaid:c,pricesWithPromotionSpecialSceneType:m});if(h||g.fields&&0===Object.keys(g.fields).length)return t?[]:{};const{data:p}=await(0,n.A)({method:"POST",url:"/api/productAtom/atomicInfo/get",data:g});return t?(0,a.Zg)({goods:e,atomicInfo:p||{},cb:r}):p}async getAtomicInfoNew({goods:e,fields:o={},pageKey:t,sceneKey:i,subPageKey:s,cb:l,caller:r,cccParams:d,isPaid:u,mallInfo:c,abtInfo:m}){const{reqParams:g,paramsErr:h}=(0,a.L5)({goods:e,fields:o,pageKey:t,subPageKey:s,sceneKey:i,caller:r,cccParams:d,isPaid:u,mallInfo:c,abtInfo:m});if(h||g.fields&&0===Object.keys(g.fields).length)return[];const{data:p}=await(0,n.A)({method:"POST",url:"/api/productAtom/atomicInfoWithDeal/get",data:g});return(0,a.Zg)({goods:e,atomicInfo:p||{},cb:l})}async addToBag(e){var o,t;const{goodsId:l="",mallCode:a="",quantity:r=1,traceId:d="",promotionId:c="",promotionType:m="",skuCode:g=""}=e||{},h={goods_id:l,mall_code:a,quantity:r};g&&(h.sku_code=g),d&&(h.trace_id=d),c&&(h.promotion_id=c),m&&(h.promotion_type=m);let p=null;try{p=await(0,n.A)({method:"POST",url:"/api/cart/add_mall/create",data:h})}catch(e){u.log("add to bag error:",e)}if(!p)return Promise.resolve({code:-1,msg:"request err"});let _=null;var f,I;if(0==p.code)null===(f=window.cart_module)||void 0===f||f.recart(p),null===(I=window.cartVue)||void 0===I||I.updateInfo(p.info),_=this.language.SHEIN_KEY_PC_15800;else switch(Number(p.code)){case 200401:case 500301:_=this.language.SHEIN_KEY_PC_14661;break;case 300402:_=this.language.SHEIN_KEY_PC_14617;break;case 300407:_=null;break;case 300405:_=(0,s.C)({text:this.language.SHEIN_KEY_PC_14560});break;case 500302:_=(0,i.v)((null===(o=p.info)||void 0===o?void 0:o.limitCount)||0,(0,s.C)({text:this.language.SHEIN_KEY_PC_14560}));break;case 300417:case 500303:_=(0,i.v)((null===(t=p.info)||void 0===t?void 0:t.limitCount)||0,p.tips);break;case 500304:_=this.language.SHEIN_KEY_PC_17492;break;case 500305:_=this.language.SHEIN_KEY_PC_17494;break;default:_=this.language.SHEIN_KEY_PC_14605}return _&&Object.assign(p,{tips:_}),Promise.resolve(p)}async addWish({goodsItem:e,params:{goodsId:o="",goodsSn:t="",sizeInfo:s={},mallCode:l=""},config:c={showAddToBoard:!0}}){var m;if(!e||!o)return u.warn("addWish miss params");const g={},{showAddToBoard:h}=c;(0,a.GG)({goodsItem:e,field:"addWishlistResult",value:0}),(0,a.GG)({goodsItem:e,field:"addWishlistGroup",value:0});const p=await this.getAttrSizeInfo({goodsItem:e}),_={goods_id:o,skc_name:t};null!=s&&s.attr_value_id&&Object.assign(_,{attrValueId:s.attr_value_id}),null!=p&&p.skuCode&&Object.assign(_,{sku_code:p.skuCode}),l&&Object.assign(_,{mall_code:l});const f=[(0,d.d)(_)];h&&(f.push((0,n.A)({url:"/api/user/wishlist/group/optional/goods/get"})),f.push(r.T.getUserAbtResult({posKeys:"AddShowGroup"})));const[I,P,v]=await Promise.all(f)||[];if(g.responseData={addWishlistResult:I,addWishlistGroupResult:P},null==I||!I.data||0!=I.data.code&&400401!=I.data.code)400427==(null==I||null===(m=I.data)||void 0===m?void 0:m.code)?(g.type="limit",g.tips=(0,i.v)(I.data.info.limit,this.language.SHEIN_KEY_PC_19347)):-1===(null==I?void 0:I.code)&&(g.type="needLogin");else if((0,a.GG)({goodsItem:e,field:"addWishlistResult",value:1}),g.type="success",h&&P){var b,y;const o=(null===(b=P.data)||void 0===b||null===(y=b.info)||void 0===y?void 0:y.groupList)||[],{AddShowGroup:t={}}=v||{};("ShowGroup"===t.param||o.length)&&((0,a.GG)({goodsItem:e,field:"addWishlistGroup",value:!0}),setTimeout((()=>{(0,a.GG)({goodsItem:e,field:"addWishlistGroup",value:!1})}),5e3),g.showWishlistGroup=1)}return g}async cancelWish({goodsItem:e,showGroupPopup:o=!0,params:{goodsId:t=""}}){var i,s,n,l;if(!e||!t)return u.warn("cancelWish miss params");const r={};if(null!=e&&null!==(i=e.pretreatInfo)&&void 0!==i&&i.cancelWishlistLoading)return r.type="requesting",r;(0,a.GG)({goodsItem:e,field:"cancelWishlistLoading",value:!0});const c=await(0,d.jR)({goods_id:t});return r.responseData=c,(0,a.GG)({goodsItem:e,field:"cancelWishlistLoading",value:!1}),0===Number(null===(s=c.data)||void 0===s?void 0:s.code)&&1===Number(null===(n=c.data)||void 0===n||null===(l=n.info)||void 0===l?void 0:l.result)?((0,a.GG)({goodsItem:e,field:"addWishlistResult",value:0}),r.type="success"):r.type="fail",o&&(0,a.GG)({goodsItem:e,field:"addWishlistGroup",value:0}),r}async getAttrSizeInfo({goodsItem:e=null}){var o,t;if(!e)return;let i={},s=e.goods_id;(0,a.GG)({goodsItem:e,field:"getAttrSizeInfoLoading",value:!0});const l=(0,n.A)({url:"/api/productInfo/attr/get",params:{id:s,_t:Date.now()}}),r=(0,n.A)({url:"/api/productInfo/sizeRules/get",params:{goods_ids:s}}),d=await Promise.all([l,r]);let u=(null==d?void 0:d[0])||{},c=(null==d||null===(o=d[1])||void 0===o||null===(t=o.info)||void 0===t?void 0:t[Number(s)])||{};var m,g,h,p;if(u&&0===Number(u.code))if((null===(m=u.info)||void 0===m||null===(g=m.attrSize)||void 0===g?void 0:g.length)>0)u=(u.info.attrSize||[]).filter((e=>{var o,t;return(null==e||null===(o=e.price)||void 0===o?void 0:o.salePrice)&&(null==e||null===(t=e.price)||void 0===t?void 0:t.retailPrice)})),u.forEach((o=>{var t;o.goodsInfoForSize={},o.goodsInfoForSize.retailPrice=o.price.retailPrice,o.goodsInfoForSize.salePrice=o.price.salePrice,o.goodsInfoForSize.unit_discount=o.price.unit_discount,o.goodsInfoForSize.original_discount=null==e?void 0:e.original_discount,o.goodsInfoForSize.pretreatInfo={},o.goodsInfoForSize.pretreatInfo.limitedoff=(null==e||null===(t=e.pretreatInfo)||void 0===t?void 0:t.limitedoff)||void 0,this.dealUnitDiscount({goodsItem:o.goodsInfoForSize})})),(0,a.GG)({goodsItem:e,field:"attrSize",value:u}),(0,a.GG)({goodsItem:e,field:"sizeRules",value:c});else if(null!==(h=u.info)&&void 0!==h&&null!==(p=h.sale_attr_list)&&void 0!==p&&p[s]){const o=u.info.sale_attr_list[s],t=o.skc_sale_attr,n=o.sku_list||[];null!=t&&t.length||1!=n.length||(i={goodsItem:e,skuCode:n[0].sku_code,hasAttr:!1}),t.length&&(0,a.GG)({goodsItem:e,field:"attrSize",value:t})}else i={goodsItem:e,selectedSize:"",hasAttr:!1};else u&&200302==Number(u.code)&&(i={goodsItem:e,selectedSize:"",hasAttr:!1});return(0,a.GG)({goodsItem:e,field:"getAttrSizeInfoLoading",value:!1}),i}}},673076:(e,o,t)=>{t.d(o,{GG:()=>r,L5:()=>a,Zg:()=>n,dm:()=>d});var i=t(665640);const s={page_goods_group:"shein_picks",page_daily_new:"daily_new"},n=({goods:e,atomicInfo:o,cb:t})=>(e.forEach((e=>{const i=o[e.goods_id]||{};Object.keys(i).forEach((o=>{"goods_id"!==o&&(e[o]=i[o])})),t&&"function"==typeof t&&t(e)})),e),l=({goods:e,item:o,fields:t,pageKey:s,sceneKey:n})=>{let l="",{locateLabels:a,enableDecisionAttr:r,cccTspBadges:d,skuPrices:u,promoLabel:c,userBehaviorLabel:m,beltLabel:g,rankingList:h}=t;return o?(o.goods_id||(l+="商品缺少goods_id；"),!r&&!d||o.cat_id||(l+=`goods_id: ${o.goods_id}，缺少cat_id；`)):(null!=e&&e.length||(l+="goods为空；"),!r&&!d||s&&n||(s||(l+="; 缺少pageKey；"),n||(l+="; 缺少sceneKey；")),(c||m||g||h||a)&&!s&&(l+="; 缺少pageKey")),l&&i.error(l),l},a=({goods:e,fields:o,pageKey:t,subPageKey:i,sceneKey:n,caller:a,cccParams:r,isPaid:d,mallInfo:u,abtInfo:c,pricesWithPromotionSpecialSceneType:m})=>{const{locateLabels:g,enableDecisionAttr:h,cccTspBadges:p,skuPrices:_,catName:f,quickShip:I,promoLabel:P,userBehaviorLabel:v,beltLabel:b,rankingList:y,starComment:S}=o;l({goods:e,fields:o,pageKey:t,sceneKey:n});const E=[],w={};for(let t=0;t<e.length;t++){const{goods_id:i,goods_sn:s,cat_id:n,sku_code:a,mall_code:r,promotionId:d,productRelationID:u,goods_relation_id:c,store_code:m}=e[t],g=u||c;if(!w[i]){w[i]=1,l({item:e[t],fields:o});const u={};r&&Object.assign(u,{mall_code:r}),i&&Object.assign(u,{goods_id:i}),s&&Object.assign(u,{goods_sn:s}),d&&Object.assign(u,{promotionId:d}),n&&(h||p||f||y)&&Object.assign(u,{cat_id:n}),a&&(_||I)&&Object.assign(u,{sku_code:a}),g&&S&&Object.assign(u,{spuId:g}),m&&Object.assign(u,{store_code:m}),E.push(u)}}const C={atomicParams:E,fields:o,caller:a,isPaid:d,mallInfo:u,abtInfo:c,pricesWithPromotionSpecialSceneType:m};return(g||h||p||P||v||b||y)&&(C.scene={sceneKey:p?n:void 0,pageKey:s[t]||t,subPageKey:i}),Object.keys(r||{}).length&&Object.assign(C,{cccParams:r}),{reqParams:C}},r=({goodsItem:e=null,field:o=null,value:t=null}={})=>{e&&o&&(e.pretreatInfo||(e.pretreatInfo={}),e.pretreatInfo[o]=t)},d=({pageKey:e})=>["page_real_class","page_select_class","daily_new","shein_picks","page_coupon_product","page_real_time_feedback","page_search"].includes(s[e]||e)},890833:(e,o,t)=>{t.d(o,{A:()=>i});const i={DEBUG:!1,FullCourtPromotionTypeIds:[4,21,22,26],FetchPromotionLableTypeIds:[2,14,15,24,28],NeedFetchPromotionTypeIds:[1,2,4,8,9,12,13,14,15,18,19,20,21,22,24,25,26,28,29,31],cartNeedGroupPromotionTypeIds:[1,2,9,11,13,15,18,19,20,24,25,28],NeedGatherCardPromotionTypeIds:[1,2,4,9,10,11,13,14,15,16,17,18,19,20,24,25,28],NeedDealPromotionTypeIds:[1,2,3,4,8,9,10,11,13,14,15,16,17,18,19,20,21,24,25,28,31],PriorityPromotionTypeIds:[2,12,13,14,15,9,16,17,18,19,24,25,1,20,10,11,3,8,28,29,31],allPromotionTypeIds:[1,2,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,24,25,26,28,31],BrandProductPromotionTypeIds:[2,28],TitlePromotionTypeIds:{SHEIN_KEY_PC_16032:[1,9,14,15,16,17,18,19],SHEIN_KEY_PC_16033:[2,4,28],SHEIN_KEY_PC_15966:[13,22],SHEIN_KEY_PC_16035:[20]},IconPromotionTypeIds:{sh_pc_sui_icon_apponly_20px_promo:[8],sh_pc_sui_icon_flashsale_16px_flash:[10,11],sh_pc_sui_icon_time_16px_promo:[3,31]}}},950357:(e,o,t)=>{t.d(o,{Cl:()=>s,E9:()=>u,Yt:()=>n,d:()=>r,jR:()=>a,mp:()=>d,ti:()=>l});var i=t(383112);const s=e=>(0,i.A)({url:"/api/user/wishlist/filter/list/get",method:"get",params:e}),n=async e=>(0,i.A)({url:"/user/get_wishlist_by_filter",method:"get",params:e,useBffApi:!0}),l=async e=>(0,i.A)({url:"/user/get_wishlist_filter",method:"get",params:e,useBffApi:!0}),a=e=>(0,i.A)({url:"/api/user/wishlist/del",method:"get",params:e}),r=e=>(0,i.A)({url:"/api/user/wishlist/add",method:"post",data:e}),d=e=>(0,i.A)({url:"/user/wishlist/getEncryptToken",method:"post",data:e,useBffApi:!0,headers:{"Content-Type":"multipart/form-data"}}),u=(e=!1)=>e?(0,i.A)({url:"/user/get_wishlist_uvip_discount",method:"get",params:{},useBffApi:!0}):(0,i.A)({url:"/api/user/wishlist/sheinClub/get",method:"get",params:{}})},977456:(e,o,t)=>{t.d(o,{c:()=>s});var i=t(383112);const s=((e,{symbol:o,expire:t=6e5})=>{const i=new Map,s=Symbol();return async n=>new Promise(((l,a)=>{o=o||n;let r=i.get(o);if(r){if(r.hit!==s)return l(r.hit);r.exector.push({resolve:l,reject:a})}else r={hit:s,exector:[{resolve:l,reject:a}]},i.set(o,r);const{exector:d}=r;if(1===d.length){const s=async()=>{try{if(!d.length)return;const s=await e(n);for(;d.length;)d.shift().resolve(s);r.hit=s,t&&setTimeout((()=>i.delete(o)),t)}catch(e){const{reject:o}=d.shift();o(e),s()}};s()}}))})((()=>(0,i.A)({method:"POST",url:"/api/common/mallInfo/post"})),{symbol:"siteMallInfo"})}}]);
//# sourceMappingURL=92100-aedcb6b824f51ac5.js.map